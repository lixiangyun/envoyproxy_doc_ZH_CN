### HTTP路由

Envoy包含一个HTTP路由过滤器，可以用它来执行高级路由任务。这对于处理前端流量（传统方式用反向代理来处理请求），或者构建服务间的Envoy网格是很有用的（通常根据HTTP头部上字段可以路由以到达指定的上游服务集群）。 Envoy也支持配置为正向代理。在转发代理配置中，网络客户端可以通过将他们的http代理适当地配置为Envoy。在高层次上，路由器接收一个传入的HTTP请求，将其与上游集群进行匹配，获取到上游集群中主机的连接池，并转发该请求。路由器过滤器支持以下功能：

- 将domains/authorities映射到一组路由规则的虚拟主机
- 前缀和精确路径匹配规则（区分大小写和不区分大小写）。当前不支持正则表达式/slug匹配，主要是因为它无法精确辨别路由规则是否相互冲突。由于这个原因，我们不建议在反向代理级别使用正则表达式/slug路由，但是我们可能会根据需求添加支持
- 根据TLS重定向到虚拟主机
- 根据path/host重定向的路由规则
- 显式host改写
- 根据上游主机的DNS名称自动重写host
- Prefix重写
- Websocket在路由级别升级
- 通过HTTP头或通过路由配置请求重试
- 通过HTTP头或通过路由配置指定的请求超时
- 通过运行时间值将流量从一个上游群集转移到另一个上（请参阅流量转移/分流）
- 使用基于权重/百分比的路由（请参阅流量转移/拆分）跨多个上游群集进行流量分流
- 任意头匹配路由规则
- 虚拟集群场景，指定虚拟主机作为虚拟群集，由Envoy用于在标准群集级别之上生成附加统计信息。虚拟群集可以使用正则表达式匹配
- 基于优先级的路由
- 基于哈希策略的路由
- 非转发代理支持绝对url

#### 路由表
HTTP连接管理器的配置拥有所有配置的HTTP过滤器使用的路由表。虽然路由器过滤器是路由表的主要使用者，但是如果他们想根据请求的最终目的地做出决定，其他过滤器也可以访问。例如，内置的速率限制过滤器参考路由表来确定是否应该基于路由来调用全局速率限制服务。 即使决策涉及随机性（例如，在运行时配置路由规则的情况下），连接管理器也确保所有获取路由的呼叫对于特定请求是稳定的。




### 返回
- [架构介绍](../Architectureoverview.md)
- [简介](../../Introduction.md)
- [首页目录](../../README.md)